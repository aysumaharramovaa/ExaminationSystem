<!doctype html>
<html lang="az">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Imtahan Sistemi</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="container">
      <h2 id="sual"></h2>
      <div id="cavablar"></div>
    </div>

    <script src="questions.js"></script>

    <script>
      let sualIndex = 0;
      let duzCavab = 0;
      let sehvCavab = 0;

      const sualYeri = document.getElementById("sual");
      const cavabYeri = document.getElementById("cavablar");

      function qarishdir(array) {
        for (let i = array.length - 1; i > 0; i--) {
          let j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
      }

      qarishdir(questions);

      function sualiGoster() {
        cavabYeri.innerHTML = "";

        let sual = questions[sualIndex];

        sualYeri.innerText = sualIndex + 1 + ". " + sual.question;

        let variantlar = [sual.correct, ...sual.wrong];
        qarishdir(variantlar);

        variantlar.forEach(function (secim) {
          let btn = document.createElement("button");
          btn.innerText = secim;

          btn.onclick = function () {
            if (secim === sual.correct) {
              duzCavab++;
              btn.style.backgroundColor = "green";
            } else {
              sehvCavab++;
              btn.style.backgroundColor = "red";
            }

            Array.from(cavabYeri.children).forEach(function (d) {
              d.disabled = true;
            });

            setTimeout(function () {
              sualIndex++;

              if (sualIndex < questions.length) {
                sualiGoster();
              } else {
                neticeniGoster();
              }
            }, 1000);
          };

          cavabYeri.appendChild(btn);
        });
      }

      function neticeniGoster() {
        sualYeri.innerText = "İmtahan bitdi!";
        sualYeri.style.textAlign = "center";

        cavabYeri.innerHTML = "";

        let netice = document.createElement("div");

        netice.innerHTML = `
        <h3>Ümumi sual sayı: ${questions.length}</h3>
        <h3>Düzgün cavab: ${duzCavab}</h3>
        <h3>Səhv cavab: ${sehvCavab}</h3>
        <p>4 səhv bir düzü aparır (nolsun bura DİM deyil Kamran müəllim belə istəyir)</p>
    `;

        cavabYeri.appendChild(netice);
      }

      sualiGoster();
    </script>
  </body>
</html>
