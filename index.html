<!doctype html>
<html lang="az">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Examination System</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="container">
      <h2 id="sual"></h2>
      <div id="cavablar"></div>
    </div>

    <script src="questions.js"></script>

    <script>
      let sualIndex = 0;
      let duzCavab = 0;
      let sehvCavab = 0;

      const sualYeri = document.getElementById("sual");
      const cavabYeri = document.getElementById("cavablar");

      function qarishdir(array) {
        // for (let i = array.length - 1; i > 0; i--) {
        //   let randomIndex = Math.floor(Math.random() * (i + 1));
        //   let temp = array[i];
        //   array[i] = array[randomIndex];
        //   array[randomIndex] = temp;
        // }

        function qarishdir(array) {
          for (let i = array.length - 1; i > 0; i--) {
            let j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
          }
        }
      }

      qarishdir(questions);

      let secilmisSuallar = questions.slice(0, 15);

      function sualiGoster() {
        cavabYeri.innerHTML = "";

        let sual = secilmisSuallar[sualIndex];
        sualYeri.innerText = sualIndex + 1 + ". " + sual.question;

        let variantlar = [sual.correct, ...sual.wrong];
        qarishdir(variantlar);

        variantlar.forEach(function (secim) {
          let btn = document.createElement("button");
          btn.innerText = secim;

          btn.onclick = function () {
            if (secim === sual.correct) {
              duzCavab++;
              btn.style.backgroundColor = "green";
            } else {
              sehvCavab++;
              btn.style.backgroundColor = "red";
            }

            Array.from(cavabYeri.children).forEach(function (d) {
              d.disabled = true;
            });

            setTimeout(function () {
              sualIndex++;

              if (sualIndex < secilmisSuallar.length) {
                sualiGoster();
              } else {
                neticeniGoster();
              }
            }, 1000);
          };

          cavabYeri.appendChild(btn);
        });
      }

      function neticeniGoster() {
        sualYeri.innerText = "İmtahan bitdi!";
        sualYeri.style.textAlign = "center";

        cavabYeri.innerHTML = "";

        let netice = document.createElement("div");

        netice.innerHTML = `
        <h3>Ümumi sual sayı: ${secilmisSuallar.length}</h3>
        <h3>Düzgün cavab: ${duzCavab}</h3>
        <h3>Səhv cavab: ${sehvCavab}</h3>
        <p>4 səhv bir düzü aparır</p>
      `;

        cavabYeri.appendChild(netice);
      }

      sualiGoster();
    </script>
  </body>
</html>
